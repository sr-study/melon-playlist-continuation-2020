

### weighted_grpah는 쓰레기로 판명났습니다.

### nns_enseble_with_artist.py에서 계속 이것 저것 바꿔 볼 예정 입니다.





# 실험 일지 (split 0.98로 되있을때 기준 )

## case 쪼개기

선홍님이 말씀하신대로 질의에 종류가 4개다.

case 1 : song + tag

case 2 : tag

case 3 : song

case 4 : x

점수를 case 별로 나눠서 하게 evaluate 함수를 고쳐놨다.

알고리즘의 변화가 어떤 case에서 잘먹고 어떤 case에서 안좋으면 

case 별로 모델을 다른걸 쓸수 있다.
 

## 6월 6일 기준 지수가 제출한 코드 (현재 5등)
### Total score
Music nDCG: 0.236434
Tag nDCG: 0.457622
Score: 0.269612
### song + tag
Music nDCG: 0.252359
Tag nDCG: 0.428683
### tag
Music nDCG: 0.0178572
Tag nDCG: 0.463362
### song
Music nDCG: 0.331558
Tag nDCG: 0.543893
### x
Music nDCG: 0.000511157
Tag nDCG: 0.063024



##  실험 1 
아티스트 점수 변경  
ex)

 song_list 1 = 아이유 곡 6, 황지수 곡 4, 김남웅 곡 2

기존 방법

질의에 아이유 곡이 있으면 가중치 1 

바꾼 방법

질의에 아이유 곡이 이있으면 가중치  6 / 6+4+2 = (train에 아이유 곡)/(전체 곡)

소장르도 비슷한 방법으로 바꿈

이후 실험은 모두 실험 1 코드 위에 했다. 그러므로 실험 1 은 자동 반영


## 실험 2

태그 비교할때 == 에서 in 으로 바꿔 보자 
  
단어가 완전 똑같은게 아니라 유사하게 들어있으면 점수를 주겠다는 아이디어 


오히려 태그가 떨어짐 , 아마 안 유사한 애들도 들어와서 그런듯


##  실험 3

제목을 끼얹어 보자

가장 단순하게 질의 제목에 있는 단어가 train 제목에 있기라도 하면 가장 큰 유사도 점수를 줘보자. (10점)

태그는 말도안되게높아졌는데 Music 은 박살남.  title only case에서 tag score가 인상적으로 높다. 또한 tag만 있는것보다 music 점수가 높다.

 song만 있는것에서 점수가 낮아졌는데, 오히려 title이 songs만 있는 case에서 유사도에 노이즈를 준다.




### 실험 4


실험 3에서 tag_q in tag_t 일때 1개라도 같던가 유사하면 6점주고 뻇는데, tag  갯수별로 2점씩 주는걸로 바꾸었다.



### 실험 5

실험 3 + 실험 4의 점수 변화

질의 tag 당 train tag와 유사한 tag + 2점 (기존 4점)

질의 제목의 단어당 train 제목과 같은 단어가 있는 경우 + 3점 (기존 10점)



#결론

music score


|실험 종류|지수|실험 1|실험 2| 실험 3|실험 4|실험 5|
|:---|---|---|---|---|---|---|
|'total'|**0.236434**|0.233764 |0.234814 |0.224655|0.225211 |0.235478|
|'song+tag' |0.252359  |0.253778 |**0.254614**|0.240961|0.241467 |0.249401|
|'tag'| 0.0178572  |0.0178572 |0.0231366 |0.0349665|0.0375836|**0.0396738**|
|'song'|**0.331558**  |0.323833 |0.323833 |0.295177 |0.295177 |0.310566|
|'x title only'|0.000511157  |0.000511157 |0.000511157 |0.0823252 |0.0823252 |**0.090948**|


tag score

|실험 종류|지수|실험 1|실험 2| 실험 3|실험 4|실험 5|
|:---|---|---|---|---|---|---|
|'total'|0.457622  |0.457979 |0.445503|**0.470986** |0.442562 |0.446817|
|'song+tag'|0.428683 |0.428884|0.405034|**0.473315**|0.426395|0.389981|
|'tag'| **0.463362**|0.464202|0.442242|0.388536|0.312034|0.279656|
|'song'|0.543893 |0.544005|0.544667|0.530006|0.529474|**0.584533**|
|'x title only'| 0.063024|0.0648282|0.055223|0.255488|**0.259639**|0.255488|